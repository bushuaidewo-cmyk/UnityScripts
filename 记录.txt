spawnConfig.idleDelay 如果是0 就一直循环idleAnimation 
如果spawnConfig.idleDelay 如果是1 ，1以后进入巡逻



两个怪碰到一起 也要转向   或  穿插 

还有就是巡逻阶段，巡逻的时候只给移动系（moveAnimation 和 restAnimation）添加一个选项，这个选项是（自动转向 或 自动跳跃过去），转向已经做好，接下来的功能就是是否遇到障碍或悬崖自动跳跃过去，跳跃过去以后还是接巡逻阶段移动或休息，再悬崖墙壁自动跳跃期间要把移动系从新开始，落地后移动系从新开始计算
这个跳跃所使用的底层逻辑 和  巡逻 跳跃系（jumpAnimation 和 jumpRestAnimation）一致，代码底层用一个，比如跳跃改了什么算法，这个也会改，但是面板要单独，因为悬崖峭壁自动跳跃这个比  跳跃系要有不同，  

巡逻跳跃系不加这个功能，没有悬崖峭壁自动跳跃这个功能，但是会转向们已经做好

悬崖和 墙壁能不能跳上去 也要有检测  ，检测就是再场景会摆放boxcolloder2d istrigger  ，怪物撞到就检测可以跳跃  ，不需要判断多高墙 多远悬崖 ，判断完全由关卡控制  

如果怪物没有撞到boxcolloder2d istrigger 检测体，撞到墙了，还是会正常转向，也就是 没有boxcolloder2d istrigger  的时候怪物和之前一样 转向，所以这个自动跳跃要用两种结合判断，平时都是悬崖墙壁转向，遇到有boxcolloder2d istrigger   就自动跳，所以自动跳时满足两个条件：既要转向条件满足，又要有boxcolloder2d istrigger，因为从悬崖这边（有boxcolloder2d istrigger）自动跳到悬崖那边（也有boxcolloder2d istrigger），那可能就触发了两次


怪物和怪物之间是可以穿插的 ，但会不会 闪烁
角色和怪物也是可以穿插的（因为角色未来做伤害会有伤害动画和击退效果，所以穿插也还好，暂时不做）

WALL层是 踩墙使用

编辑器 当选择直线运动 并且 可以障碍跳跃的时候  下面的 跳跃设置就 障碍跳跃的设置 



关于角色出生在相机 锁定区域解法

首先角色是否在 CameraZone 这个物体里，如果在 ，相机的位置在哪里这个是关键，
需要知道这个检测体左边的边位置 和 右边边的位置，可以人为 的在CameraZone 这个物体的脚本里 打左或右标签，如果打的是右标签，那这个相机位置就是 CameraZone 这个检测体右边的边 位置（角色Component  与 CameraZone 这个检测体右边的边 交点位置）
角色出生的时候相机要被矫正到这个位置  
另外 人物身上用点检测场景CameraZone 检测体


新需求 
怪物可以走包括45度以下的斜坡，现在是走到斜坡就停下了， 不断地抖，还会斜坡滑下来
45度以下的可以走上去  ，以上的要转向

直线移动走包括45度以下的斜坡停下休息的 时候可以站住 
跳跃主要是跳到包括45度以下的斜坡，休息的时候可以停住

和自动跳跃没关系，不要碰到了相关代码
转向考虑下45度以上斜坡才转向

物理还是要用rigidbody dynamic



patrolConfig.patrolPoints 这里给了两点位置patrolConfig.patrolPoints.Array.data[0]h和patrolConfig.patrolPoints.Array.data[1]后，怪物并没有再两点之间移动 正常怪物出生的位置 走到两点patrolConfig.patrolPoints.Array.data[0]点 再 走 到patrolConfig.patrolPoints.Array.data[1]点 patrolConfig.pingPong 如果勾上就是一直循环，不勾上就不走点


patrolConfig.patrolPoints 这个点同样对跳跃也有用，再两点之间跳跃，两点之间如果跳跃不能过点，到点上方X轴速度为0，怪物垂直落下 选择点之间移动或跳跃 同样支持 转向和自动跳跃 所以摆点的时候会注意不要和 自动跳跃检测体重叠，优先级不用考虑


把脚本分出来了

“MonsterController 只做编排”版本和5个独立逻辑脚本
自动跳跃 = 跳跃内核（JumpCore）+ 自动编排（AutoJumpDriver）

JumpCore 只做物理：起跳、重力、SafeMoveVertical、落地判定；不管许可区/上膛/抑制窗口/转向。

AutoJumpDriver 只做“自动”策略：许可区上膛/保险、落地后悬崖抑制帧、调用 JumpCore 起跳&空中核（你之前的变量、窗口语义完全保留）。

MonsterController

自动转向（AutoTurnLogic）：墙/悬崖检测 + TurnAround 封装，墙线从“脚底+偏移”发射，wallCheckHeightOffset 调节立即可见。

MonsterController

地面直线段（GroundMoveLogic）：遇障碍→优先试自动跳，否则转向；修复了你之前“抑制窗口被第二次 CheckCliffAhead 覆盖”的问题（只用一次合并结果）。

MonsterController







第1个需求
MonsterController要借鉴PlayerController 的移动 跳跃 斜坡移动 斜坡静止 平地走上斜坡  斜坡走下平地  向上走斜坡速度 和向下走胁迫速度要与平地走斜坡速度相同  等物理方式，并且适合怪物编辑器

第2个需求
需要和第1个需求匹配，就是第一个需求好的同时还能满足第2个需求

怪物编辑器已经有一个版本了
完善当前的版本
具体如下：
spawnConfig 出生阶段 这块不用管 已经OK

接下来就是patrolConfig 巡逻阶段

patrolConfig.patrolPoints 这个是生成点，怪物再点之间移动，选择了这个方式怪物就不会自动跳跃了 自动转向了 完全靠点，几个点之间移动
patrolConfig.pingPong 这个功能可以删掉
patrolConfig.movements 这个是可以指定不同的巡逻移动状态 ，有直线移动 和 跳跃移动 ，可以再列表里+ 加入element0、element1……很多状态
patrolConfig.movements.Array.data[0].executeCount，内部element0执行几次 

patrolConfig.randomOrder 勾上就是列表里element0、element1……一直随机，不勾就是按顺序element0、element1……一直循环
patrolConfig.loopAll 这个功能可以删掉

再patrolConfig.movements下element0
patrolConfig.movements.Array.data[0].type  设置类型 straight 或 jump
选择 straight的时候的参数
patrolConfig.movements.Array.data[0].moveSpeed  匀速速度  
patrolConfig.movements.Array.data[0].acceleration  加速度 起步时候  0  加速到  匀速速度   ，如果设置是0  ，没有加速度，直接到达匀速速度
还要增加一个加速时间 缺失
patrolConfig.movements.Array.data[0].deceleration  减速度 减速时候   匀速速度     减速到 0，如果设置是0  ，没有减速度，直接匀速速度降到0
还要增加一个减速时间 缺失
patrolConfig.movements.Array.data[0].restDuration  休息停顿时间  

patrolConfig.movements.Array.data[0].moveAnimation  怪物移动动画
patrolConfig.movements.Array.data[0].restAnimation   怪物休息动画
patrolConfig.movements.Array.data[0].moveEffectOnlyFirst   移动特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是训话播放
patrolConfig.movements.Array.data[0].moveEffectPrefab  指定怪物移动中动画帧（OnPatrolMoveEffect）事件播放特效  
patrolConfig.movements.Array.data[0].restEffectOnlyFirst  休息特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是训话播放
patrolConfig.movements.Array.data[0].restEffectPrefab   指定怪物休息中的动画帧（OnPatrolRestEffect）事件播放特效

patrolConfig.movements.Array.data[0].obstacleBehavior  自动类型 turn 或 auto jump 
选择turn 怪物走到悬崖或墙壁 会自动转向 朝自己朝向的方向移动   墙壁和悬崖已经有检测参数 
wallCheckDistance  检测长度
wallCheckHeightOffset   上下偏移
cliffCheckDistance  检测长度
cliffCheckOffsetX     偏移

auto jump 选项可以删掉  默认都是turn
因为auto jump 是由怪物撞到场景的autoJumpPermitTag的物体就会跳跃（跳跃以后autoJumpIgnoreCliffFrames 8帧不检测 悬崖和 自动跳跃，以免连续）并且撞到墙壁也会转向，所以不需要选项，默认就是turn 


下面的是autoJumpPermitTag触发怪物跳跃的参数
参数
patrolConfig.movements.Array.data[0].autojumpSpeed 匀速速度 X
patrolConfig.movements.Array.data[0].autojumpHeight 跳跃高度 Y
patrolConfig.movements.Array.data[0].autogravityScale  向下重力 系数  ，系数 * 怪物rb2d 下GravityScale 这个值要给>0
patrolConfig.movements.Array.data[0].autojumpDuration  跳跃持续时间  指空中到落地时间，并且这时候 gravityScale 失效 

资源
patrolConfig.movements.Array.data[0].jumpAnimation 怪物跳跃动画
patrolConfig.movements.Array.data[0].jumpRestAnimation 怪物跳跃休息动画
patrolConfig.movements.Array.data[0].jumpEffectOnlyFirst 跳跃特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是训话播放
patrolConfig.movements.Array.data[0].jumpEffectPrefab  指定怪物跳跃中动画帧（OnPatrolJumpEffect）事件播放特效  
patrolConfig.movements.Array.data[0].jumpRestEffectOnlyFirst 跳跃休息特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是训话播放
patrolConfig.movements.Array.data[0].jumpRestEffectPrefab 指定怪物跳跃休息中的动画帧（OnPatrolJumpRestEffect）事件播放特效


当选择 jump的时候的参数
参数
patrolConfig.movements.Array.data[0].jumpSpeed 匀速速度 X
patrolConfig.movements.Array.data[0].jumpHeight 跳跃高度 Y
patrolConfig.movements.Array.data[0].gravityScale  向下重力 系数  ，系数 * 怪物rb2d 下GravityScale    
patrolConfig.movements.Array.data[0].jumpDuration 跳跃持续时间  
patrolConfig.movements.Array.data[0].restEffectPrefab跳跃休息时间 

moveDuration  是跳跃总体时间，比如跳跃速度 重力 让怪物再空中跳跃了3S，设置总时间是2S，那还是按照3S算，只不过落地后大于设定值2S就不跳跃了，如果跳跃速度 重力 让怪物再空中跳跃了3S，总时间是7S，那就让怪物再跳跃2次，落地后因为还剩1秒，所以还要再跳一次
restDuration 是moveDuration 执行完后的最后一跳落地开始计算，落地跳跃休息 不动 

资源
patrolConfig.movements.Array.data[0].jumpAnimation 怪物跳跃动画
patrolConfig.movements.Array.data[0].jumpRestAnimation 怪物跳跃休息动画
patrolConfig.movements.Array.data[0].jumpEffectOnlyFirst 跳跃特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是训话播放
patrolConfig.movements.Array.data[0].jumpEffectPrefab  指定怪物跳跃中动画帧（OnPatrolJumpEffect）事件播放特效  
patrolConfig.movements.Array.data[0].jumpRestEffectOnlyFirst 跳跃休息特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是循环播放
patrolConfig.movements.Array.data[0].jumpRestEffectPrefab 指定怪物跳跃休息中的动画帧（OnPatrolJumpRestEffect）事件播放特效

patrolConfig.movements.Array.data[0].obstacleBehavior 默认就是 turn 
怪物跳跃撞到墙壁的时候会转向，已经转向后等8帧后再检测，防止一直检测抖动，另外悬崖不检测转向，跳跃仅仅是撞上前方墙才转向
当然也支持怪物跳跃中撞到场景的autoJumpPermitTag的物体再次跳跃，跳跃空中撞到autoJumpPermitTag的物体，从触发那一刻为起点再次跳跃

autoJumpPermitTag 的自动跳跃可以和 type设置类型jump参数不同，资源配置相同

编辑器面板优化，巡逻阶段
选择type  设置类型 straight
直线移动参数和资源
自动跳跃参数和资源

选择type  设置类型 jump
跳跃参数和资源
自动跳跃参数和资源
自动跳跃与跳跃参数不同 ，资源相同

请把以上1和2功能完善，不要删除原来这几个脚本功能配置，需要删除的上面的说明也写了，有些字段虽然是空的，但也是策划预留的一部分
不需要完整代码，不用解释为什么，贴出来代码要改动的位置，怎么替换或删除或增加，不要漏掉




调整下规则

正常跳跃  
moveDuration  是跳跃总体时间，比如跳跃速度 重力 让怪物再空中跳跃了3S，设置总时间是2S，那还是按照3S算，只不过落地后大于设定值2S就不跳跃了，如果跳跃速度 重力 让怪物再空中跳跃了3S，总时间是7S，那就让怪物再跳跃2次，落地后因为还剩1秒，所以还要再跳一次
restDuration 是moveDuration 执行完后的最后一跳落地开始计算，落地跳跃休息 不动 

自动跳跃
patrolConfig.movements.Array.data[0].autojumpSpeed   空中全程都有速度
patrolConfig.movements.Array.data[0].autojumpHeight   
patrolConfig.movements.Array.data[0].autogravityScale
patrolConfig.movements.Array.data[0].automoveDuration   同正常跳跃 设置
patrolConfig.movements.Array.data[0].restDuration 加回来   同正常跳跃 设置

现在结果是 自动跳跃到最高点就垂直掉下来，没有继续往前跳，（补充：怪物撞到AutoJumpZone后，自动跳跃和悬崖就不能再触发，要落地后等autoJumpIgnoreCliffFrames的帧数后才可以触发；但是墙壁的转向要保留，可能跳过去以后墙壁自动转向




自查代码
patrolConfig.movements.Array.data[0].moveAnimation  没指定动画是不能播moveAnimation动画 和 不能播moveEffectPrefab特效的
patrolConfig.movements.Array.data[0].restAnimation  没指定动画是不能播restAnimation动画 和 不能播restEffectPrefab特效的
patrolConfig.movements.Array.data[0].moveEffectPrefab   没指定prefab  ，而动画里给了关键帧onfx ,并且给了特效prefab名字，也不能播moveEffectPrefab特效
patrolConfig.movements.Array.data[0].restEffectPrefab   没指定prefab ，而动画里给了关键帧onfx ,并且给了特效prefab名字，也不能播restEffectPrefab特效
patrolConfig.movements.Array.data[0].moveEffectPrefab   指定了prefab  ，而动画里没给关键帧onfx ,也不能播moveEffectPrefab特效
patrolConfig.movements.Array.data[0].restEffectPrefab   指定了prefab ，而动画里没给关键帧onfx ,也不能播restEffectPrefab特效

patrolConfig.movements.Array.data[0].jumpAnimation  没指定动画是不能播jumpAnimation 和 不能播jumpEffectPrefab特效的
patrolConfig.movements.Array.data[0].jumpRestAnimation  没指定动画是不能播jumpRestAnimation 和 不能播jumpRestEffect特效的
patrolConfig.movements.Array.data[0].jumpEffectPrefab   没指定prefab  ，而动画里给了关键帧onfx ,并且给了特效prefab名字，也不能播jumpEffectPrefab特效
patrolConfig.movements.Array.data[0].jumpRestEffectPrefab    没指定prefab ，而动画里给了关键帧onfx ,并且给了特效prefab名字，也不能播jumpRestEffect特效
patrolConfig.movements.Array.data[0].moveEffectPrefab   指定了prefab  ，而动画里没给关键帧onfx ,也不能播jumpEffectPrefab特效
patrolConfig.movements.Array.data[0].restEffectPrefab   指定了prefab ，而动画里没给关键帧onfx ,也不能播jumpRestEffect特效

自动跳跃资源逻辑同正常跳跃



s动画关键帧还是单独的 ，因为动画可以相同、指定特效也可能相同、但是一条动画里这个动画关键帧一定不同，也绝对不会指定两个相同关键帧
spawnEffectPrefab
idleEffectPrefab
moveEffectPrefab
restEffectPrefab
jumpEffectPrefab
jumpRestEffectPrefab

保持规则：
没有配置动画/Prefab 时，任何情况下都不能播动画/特效；
动画里没给关键帧事件也不能播放特效；
配置了 Prefab 但关键帧事件没给也不能播放特效；
没有在当前段配置的 Prefab 即便 关键帧事件 给了名字也不能播放特效


堆栈执行
 配置了Element0  ，自循环，  正确
如果再配置 Element1，还是   Element0  ，自循环，错误，应该是Element0、Element1、Element0循环下去
如果再配置Element2，Element0、Element1、Element2顺序循环
如果勾选了patrolConfig.randomOrder，随机再Element0、Element1、Element2循环

移动/停下/跳跃/自动转向/自动跳跃/动画/特效全部走“非路点巡逻”的同一套底层逻辑。
路点只用来“到点就推进下一个（0..N..0）并在接地且允许转向时纠正朝向”。跳跃可越过路点，不会被中途强制拐头；落地恢复直线相位后再朝目标纠正。


要给巡逻阶段特效增加 位置点 fxSpawnPoint、fxIdlePoint、fxMovePoint、fxRestPoint、fxJumpPoint、fxJumpRestPoint




巡逻阶段都可以了
现在开始发现阶段

首先发现阶段的模式 移动发现 和跳跃发现 ，相当于巡逻阶段类型移动和跳跃，只不过没有路点 

所以代码应该怎么设计，比如 巡逻类型 移动类型 和  跳跃类型里面的参数 配置 逻辑 资源 动画 特效 规则 转向 自动跳跃 这些都好了 ，后面就不会再动了，巡逻阶段也不会再动了，后面新增加的比如发现阶段也是引用，巡逻阶段的底层，参数是新的一套、动画特效新的一套，底层没区别 
讨论下代码是不是需要拆分出来 或者 不拆分 

发现阶段多了一个与玩家的直线距离判断，设定的距离内，背对玩家怪物会转向转向朝玩家移动或跳跃移动，没有被动直接朝玩家移动或跳跃移动

发现阶段的模式 移动发现 和跳跃发现  ，各自独立的参数 动画 特效配置，动画特效配置同巡逻特效动画配置方式一样


先介绍移动发现阶段里面分3种状态：
1发现移动距离：一直朝向玩家方向移动 ，这个就是直接判断与玩家间距离，
怪物与玩家互动：怪物发现玩家后，玩家逃走超出了判定距离，就回到巡逻移动阶段，如果怪物一直保持和玩家发现距离内，怪物就一直追赶
参数设定: findmoveSpeed、findacceleration、findaccelerationTime、finddeceleration、finddecelerationTime、findmoveDuration、findrestDuration   底层逻辑公用巡逻阶段，参数全新
动画资源: prefabfindmoveAnimation、findrestAnimation    
特效prefab：findmoveEffectPrefab、findrestEffectPrefab  (支持prefab 或序列帧动画)   
动画播放特效关键帧:findmoveEffectPrefab、findrestEffectPrefab     动画关键帧触发特效的规则同巡逻阶段 移动

2发现后退移动距离：朝玩家反方向后退移动，怪物走到玩家的多少距离后会转向后退移动， 
怪物与玩家互动: 首要条件是怪物发现了，再发现距离之内，所以后退距离一定小于发现距离，当怪物接近玩家再发现后退距离以内，怪物就后退，后退中如果怪物设置了休息（不动）的时候，需要转向玩家（背对玩家走一段，休息转过来看看玩家的这种感觉），如果玩家继续追赶再转头背对玩家移动
当怪物接近玩家再发现后退距离以外，进入正常发现距离阶段，怪物就朝向玩家追赶，形成拉锯
参数设定:  reversemoveSpeed、reverseacceleration、reverseaccelerationTime、reversedeceleration、reversedecelerationTime、reversemoveDuration、reverserestDuration 底层逻辑公用巡逻阶段，参数全新
动画资源：同发现移动距离动画资源 prefabfindmoveAnimation、findrestAnimation
特效prefab：同发现移动距离特效资源 findmoveEffectPrefab、findrestEffectPrefab (支持prefab 或序列帧动画)
动画播放特效关键帧 ：同发现距离动画播放特效关键帧公用 findmoveEffectPrefab、findrestEffectPrefab     

3发现倒退移动距离 ：向玩家反方向倒退（脸朝玩家，方向向后倒着走），怪物走到玩家的多少距离后会倒退， 新参数: 发现倒退距离 
怪物与玩家互动：首要条件是怪物发现了，再发现距离之内，所以倒退距离一定小于发现距离，怪物接近玩家再发现倒退距离以内，怪物就倒退，后退中如果怪物设置了休息（不动）的时候，需要怪物停下
当怪物接近玩家再发现倒退距离以外，进入正常发现距离阶段，怪物就追赶，形成拉锯
参数设定: backmoveSpeed、backacceleration、backaccelerationTime、backdeceleration、backdecelerationTime、backmoveDuration、 backrestDuration 底层逻辑公用巡逻阶段，参数全新
动画资源：backmoveAnimation、 backrestAnimation
特效prefab:  backmoveEffectPrefab、 backrestEffectPrefab (支持prefab 或序列帧动画)
动画播放特效关键帧:  backmoveEffectPrefab、 backrestEffectPrefab  动画关键帧触发特效的规则同巡逻阶段 移动


现在介绍跳跃发现阶段里面分3种状态：
1发现跳跃距离：一直朝向玩家方向跳跃 ，这个就是直接判断与玩家间距离（跳跃超过了设定距离也要完成那次跳跃，落地后再调整）
怪物与玩家互动：怪物发现玩家后，玩家逃走超出了判定距离，就回到巡逻跳跃阶段，如果怪物一直保持和玩家发现距离内，怪物就一直跳跃追赶
参数设定: findjumpSpeed 、findjumpHeight、  findgravityScale、 findjumpDuration、findjumpRestDuration  底层逻辑公用巡逻阶段，参数全新
动画资源: findjumpAnimation、findjumpRestAnimation
特效prefab:findjumpEffectPrefab、findjumpRestEffectPrefab (支持prefab 或序列帧动画)
动画播放特效关键帧: findjumpEffectPrefab、findjumpRestEffectPrefab 动画关键帧触发特效的规则同巡逻阶段 跳跃

2发现后退跳跃距离：朝玩家反方向后退跳跃，怪物走到玩家的多少距离后会转向后退跳跃 （跳跃超过了设定距离也要完成那次跳跃，落地后再调整）
怪物与玩家互动: 首要条件是怪物发现了，再发现距离之内，所以后退跳跃距离一定小于发现跳跃距离，当怪物接近玩家再发现后退距离以内，怪物就后退跳跃，后退跳跃中怪物也设置了休息（不动），如果实际跳跃时间小于设定时间，多跳一次，落地才开始计算休息时间，如果实际跳跃时间大于设定时间，设定时间到了也要完成最后一跳，落地计算休息时间，这个和巡逻期间跳跃底层设计一样
当怪物接近玩家再发现后退跳跃距离以外，进入正常发现跳跃距离阶段，怪物就朝向玩家跳跃追赶，形成拉锯
参数设定: reversejumpSpeed 、reversejumpHeight、  reversegravityScale、 reversejumpDuration、reversejumpRestDuration  底层逻辑公用巡逻阶段，参数全新
动画资源：同发现跳跃距离动画资源 findjumpAnimation、findjumpRestAnimation
特效prefab：同发现跳跃距离特效资源 findjumpEffectPrefab、findjumpRestEffectPrefab (支持prefab 或序列帧动画)
动画播放特效关键帧 ：同发现距离动画播放特效关键帧公用 findjumpEffectPrefab、findjumpRestEffectPrefab 

3发现倒退跳跃距离 ：向玩家反方向倒退跳跃（脸朝玩家，方向向后倒着跳跃），怪物跳跃到玩家的多少距离后会倒退跳跃 （跳跃超过了设定距离也要完成那次跳跃，落地后再调整）
怪物与玩家互动：首要条件是怪物发现了，再发现距离之内，所以倒退跳跃距离一定小于发现跳跃距离，怪物接近玩家再发现倒退距离以内，怪物就倒退跳跃，倒退跳跃中如果怪物设置了休息（不动）的时候，需要怪物落地后转向玩家（背对玩家跳跃一段，落地后休息转过来看看玩家的这种感觉）如果实际跳跃时间小于设定时间，也要多跳一次，落地才开始计算休息时间，如果实际跳跃时间大于设定时间，设定时间到了也要完成最后一跳，落地计算休息时间，这个和巡逻期间跳跃底层设计一样
当怪物接近玩家再发现倒退跳跃距离以外，进入正常发现跳跃距离阶段，怪物就跳跃追赶，形成拉锯
参数设定: backjumpSpeed、backjumpHeight、backgravityScale、backjumpDuration、backjumpRestDuration  底层逻辑公用巡逻阶段，参数全新
动画资源: backjumpAnimation、backjumpRestAnimation
特效prefab：backjumpEffectPrefab、backjumpRestEffectPrefab (支持prefab 或序列帧动画)
动画播放特效关键帧:  backjumpEffectPrefab、backjumpRestEffectPrefab  动画关键帧触发特效的规则同巡逻阶段  跳跃

以上移动发现和跳跃发现增加3个公用参数：发现距离参数（公用：发现移动距离和发现跳跃距离）、发现后退距离参数（公用：发现后退移动距离和发现后退跳跃距离）、发现倒退距离 参数（公用：发现倒退移动距离 和 发现倒退跳跃距离）需要绘制这3根线的显示圆圈，方便调试，发现距离红色，发现后退距离白色，发现倒退距离黑色，不需要定制颜色，直接给颜色

发现阶段的模式  可以列表+ 添加  移动发现  或 跳跃发现 ,elevent0自己循环，如果添加了elevent0、elevent1，elevent0与elevent1按顺序循环
findrandomOrder 勾上随机播放elevent

特效位置得锚点
FX_FindMove / FindMovePoint
FX_FindRest / FindRestPoint
FX_FindJump / FindJumpPoint
FX_FindJumpRest / FindJumpRestPoint
FX_BackMove / BackMovePoint
FX_BackRest / BackRestPoint
FX_BackJump / BackJumpPoint
FX_BackJumpRest / BackJumpRestPoint

再发现阶段里还有攻击

攻击列表+ 添加  攻击0 elevent0自己循环，如果添加了攻击0 elevent0、攻击1 elevent1，攻击0 elevent0与攻击1 elevent1按顺序循环
elevent0 下的参数：
攻击类型：近战攻击或远程攻击

1近战攻击 
近战攻击距离：近战检测距离，只要再这个距离内，怪物就要攻击，播放攻击动画（需要绘制近战检测距离的圆圈 黄色，不需要定制颜色，直接给颜色）
攻击时间：攻击时间内怪物发出攻击，如果攻击时间<攻击动画时间，强制攻击结束，进入攻击休息时间；如果攻击时间>攻击动画时间，只攻击一次，停留在攻击最后一帧，直到攻击时间结束
攻击休息时间：攻击时间结束后，进入攻击休息时间，关闭攻击距离检测，发现移动距离 或 发现后退移动距离 或 发现倒退移动距离自动生效，例如：攻击最后一帧结束以后，间隔10S，10S内攻击距离检测关闭，这时候如果玩家再发现后退移动距离内 就执行发现后退 或者 再发现倒退移动距离内 就发现倒退 或者 发现移动距离内 就发现移动
攻击动画资源：attackAnimation

攻击特效prefab：attackEffectPrefab
攻击动画播放特效关键帧 ：attackEffectPrefab    
（如果添加了elevent1，那elevent1下面的
攻击动画资源：attackAnimation
攻击特效prefab：attackEffectPrefab (支持prefab 或序列帧动画)
攻击动画播放特效关键帧 ：attackEffectPrefab    
是新的资源，与elevent0不同）

近战攻击伤害检测体：可以给怪物新子物体指定collider2d istrigger ，并且再attackAnimation 动画内指定function 攻击判定帧 attackAnimationstart、attackAnimationend，再此期间攻击判定

攻击中有移动中攻击或跳跃中攻击：

移动中攻击：
播放攻击动画的同时可以给怪物移动速度
参数：
attackmoveSpeed、attackacceleration、attackaccelerationTime、attackdeceleration、attackdecelerationTime ，这几个参数只在攻击时间内有效，攻击休息时间失效，这些只提供移动效果，没有动画特效，这里的移动中攻击的移动逻辑同巡逻移动底层逻辑一致。
举例：由速度0加速1S后到匀速速度1，匀速速度1再匀速移动1S，由匀速速度1减到0速需要1S


跳跃中攻击：
播放攻击动画的同时可以给怪物跳跃能力
参数：
attackjumpSpeed 、attackjumpHeight、  attackgravityScale、 attackjumpDuration、attackjumpRestDuration ，当攻击动画时间<跳跃时间 = 空中攻击最后一帧一直保持到落地，落地后才算完成一次攻击；当攻击动画时间>跳跃时间 = 攻击结束最后一帧算完成一次攻击 ；这些只提供跳跃效果，没有动画特效，这里的跳跃中攻击的跳跃逻辑同巡逻移跳跃层逻辑一致

2远程攻击
远程攻击距离：远程攻击检测距离，只要再这个距离内，怪物就要攻击，播放远程攻击动画（需要绘制远程攻击检测距离的圆圈 蓝色，不需要定制颜色，直接给颜色）
远程攻击时间：远程攻击时间内怪物发出攻击，如果远程攻击时间<远程攻击动画时间，强制远程攻击结束，进入远程攻击休息时间；如果远程攻击时间>远程攻击动画时间，只远程攻击一次，停留在远程攻击最后一帧，直到远程攻击时间结束
远程攻击休息时间：远程攻击时间结束后，进入远程攻击休息时间，关闭远程攻击距离检测，发现移动距离 或 发现后退移动距离 或 发现倒退移动距离自动生效，例如：远程攻击最后一帧结束以后，间隔10S，10S内远程攻击距离检测关闭，这时候如果玩家再发现后退移动距离内 就执行发现后退 或者 再发现倒退移动距离内 就发现倒退 或者 发现移动距离内 就发现移动
攻击动画资源：attackFarAnimation
远程攻击特效prefab：attackFarEffectPrefab (支持prefab 或序列帧动画)
远程攻击动画播放特效关键帧 ：attackFarEffectPrefab    （如果添加了elevent1，那elevent1下面的远程攻击动画资源：attackFarAnimation远程攻击特效prefab：attackFarEffectPrefab远程攻击动画播放特效关键帧 ：attackFarEffectPrefab    是新的资源，与elevent0不同）

远程移动中攻击：
播放远程攻击动画的同时可以给怪物移动速度
参数：
attackFarmoveSpeed、attackFaracceleration、attackFaraccelerationTime、attackFardeceleration、attackFardecelerationTime ，这几个参数只在攻击时间内有效，攻击休息时间失效，这些只提供移动效果，没有动画特效，这里的移动逻辑同巡逻移动底层逻辑一致。
举例：由速度0加速1S后到匀速速度1，匀速速度1再匀速移动1S，由匀速速度1减到0速需要1S

远程跳跃中攻击：
播放攻击动画的同时可以给怪物跳跃能力
参数：
attackjumpSpeed 、attackjumpHeight、  attackgravityScale、 attackjumpDuration、attackjumpRestDuration ，当攻击动画时间<跳跃时间 = 空中攻击最后一帧一直保持到落地，落地后才算完成一次攻击；当攻击动画时间>跳跃时间 = 攻击结束最后一帧算完成一次攻击 ；这些只提供跳跃效果，没有动画特效，这里的跳跃中攻击的跳跃逻辑同巡逻移跳跃层逻辑一致

远程攻击飞行物释放位置：可以给怪物新子物体(空物体)指定 ，并且再attackFarAnimation 动画内指定function 攻击判定帧 attackFarAnimation，再这帧以及怪物的子物体上释放远程攻击飞行物


远程攻击飞行物：
参数：
飞行物绑定怪物子物体位置
飞行物攻击伤害检测，可以指定collider2d istrigger
飞行物同时发射个数
飞行物同时发射个数间隔时间（例如一次发3颗，每颗间隔0.2S）
飞行物发射频率完全取决于远程攻击动画播放特效关键帧attackFarEffectPrefab   
每个飞行物存活：时间
飞行物释放扇形：扇形角度，随机或均匀分布
飞行物动画资源：FlygunAnimation
飞行物特效资源：FlygunEffectPrefab (支持prefab 或序列帧动画)


远程攻击飞行物类型

飞行物直线移动
参数：
直线移动朝向：自定义角度移动或一直朝玩家方向移动
直线移动匀速速度
直线移动匀速时间
直线移动加速度：飞行物起步移动的时候加速
直线移动加速度时间
直线移动减速度：飞行物停下的时候减速
直线移动减速度时间
举例：由速度0加速1S后到匀速速度1，匀速速度1再匀速移动1S，由匀速速度1减到0速需要1S
停下休息时间，移动一段时间后停下休息不动
是否跟踪玩家，可设置跟踪强度比%，直线与跟踪混合强度
跟踪的参数飞行物直线移动参数，不需要设置

直线移动类型包括：S型直线sin移动、直线回旋镖、旋转移动、抛物线移动
如果勾选跟踪，以下飞行类型都再跟踪基础上跟踪S型直线sin移动、跟踪直线回旋镖、跟踪旋转移动、跟踪抛物线移动

S型直线sin移动：飞行物自身sin旋转
sin 参数：振幅（例如：上下摆动2米）和频率（例如：每秒摆动3次）
是否一直朝着移动方向，如果是沿着移动方向旋转（自动面向路径切线）如果否不改变自身朝向

直线回旋镖：飞行物飞出去停顿后再飞回来
参数：飞出最远距离、最远距离停顿时间、回旋回来移动匀速速度、回旋回来移动匀速速度时间、回旋回来移动加速度、回旋回来移动加速度时间、回旋回来移动减速度、回旋回来移动减速度时间
是否一直朝着移动方向，如果是沿着移动方向旋转（自动面向路径切线），如果否不改变自身朝向

旋转移动：飞行物自身圆形旋转
参数：旋转半径
是否一直朝着移动方向，如果是沿着移动方向旋转（自动面向路径切线），如果否不改变自身朝向

抛物线移动：飞行物撞到场景碰撞体会反弹
参数：
反弹力（撞到场景法线反弹）根据撞击角度计算，计算速度 * 反弹系数
向下力
最高点
是否一直朝着移动方向，如果是沿着移动方向旋转（自动面向路径切线），如果否不改变自身朝向

远程攻击飞行物命中墙壁或玩家会爆炸
参数：爆炸范围、爆炸伤害、爆炸持续时间(持续时间内一直伤害)、伤害间隔（多少时间伤害一次）
飞行物爆炸动画资源：FlygunBoomAnimation
飞行物爆炸特效资源：FlygunBoomEffectPrefab (支持prefab 或序列帧动画)

未来飞行物 还要死亡区域检测 ，暂时先不考虑，近战攻击和远程飞行物攻击伤害暂时不加入


findmoveEffectPrefab / findrestEffectPrefab  是要和发现后退移动公用得
findjumpEffectPrefab / findjumpRestEffectPrefab  是要和发现后退跳跃公用得

明天测试 发现阶段特效 动画   发现阶段得 跳跃 

争取 攻击搞了