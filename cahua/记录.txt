spawnConfig.idleDelay 如果是0 就一直循环idleAnimation 
如果spawnConfig.idleDelay 如果是1 ，1以后进入巡逻



两个怪碰到一起 也要转向   或  穿插 

还有就是巡逻阶段，巡逻的时候只给移动系（moveAnimation 和 restAnimation）添加一个选项，这个选项是（自动转向 或 自动跳跃过去），转向已经做好，接下来的功能就是是否遇到障碍或悬崖自动跳跃过去，跳跃过去以后还是接巡逻阶段移动或休息，再悬崖墙壁自动跳跃期间要把移动系从新开始，落地后移动系从新开始计算
这个跳跃所使用的底层逻辑 和  巡逻 跳跃系（jumpAnimation 和 jumpRestAnimation）一致，代码底层用一个，比如跳跃改了什么算法，这个也会改，但是面板要单独，因为悬崖峭壁自动跳跃这个比  跳跃系要有不同，  

巡逻跳跃系不加这个功能，没有悬崖峭壁自动跳跃这个功能，但是会转向们已经做好

悬崖和 墙壁能不能跳上去 也要有检测  ，检测就是再场景会摆放boxcolloder2d istrigger  ，怪物撞到就检测可以跳跃  ，不需要判断多高墙 多远悬崖 ，判断完全由关卡控制  

如果怪物没有撞到boxcolloder2d istrigger 检测体，撞到墙了，还是会正常转向，也就是 没有boxcolloder2d istrigger  的时候怪物和之前一样 转向，所以这个自动跳跃要用两种结合判断，平时都是悬崖墙壁转向，遇到有boxcolloder2d istrigger   就自动跳，所以自动跳时满足两个条件：既要转向条件满足，又要有boxcolloder2d istrigger，因为从悬崖这边（有boxcolloder2d istrigger）自动跳到悬崖那边（也有boxcolloder2d istrigger），那可能就触发了两次


怪物和怪物之间是可以穿插的 ，但会不会 闪烁
角色和怪物也是可以穿插的（因为角色未来做伤害会有伤害动画和击退效果，所以穿插也还好，暂时不做）

WALL层是 踩墙使用

编辑器 当选择直线运动 并且 可以障碍跳跃的时候  下面的 跳跃设置就 障碍跳跃的设置 



关于角色出生在相机 锁定区域解法

首先角色是否在 CameraZone 这个物体里，如果在 ，相机的位置在哪里这个是关键，
需要知道这个检测体左边的边位置 和 右边边的位置，可以人为 的在CameraZone 这个物体的脚本里 打左或右标签，如果打的是右标签，那这个相机位置就是 CameraZone 这个检测体右边的边 位置（角色Component  与 CameraZone 这个检测体右边的边 交点位置）
角色出生的时候相机要被矫正到这个位置  
另外 人物身上用点检测场景CameraZone 检测体


新需求 
怪物可以走包括45度以下的斜坡，现在是走到斜坡就停下了， 不断地抖，还会斜坡滑下来
45度以下的可以走上去  ，以上的要转向

直线移动走包括45度以下的斜坡停下休息的 时候可以站住 
跳跃主要是跳到包括45度以下的斜坡，休息的时候可以停住

和自动跳跃没关系，不要碰到了相关代码
转向考虑下45度以上斜坡才转向

物理还是要用rigidbody dynamic



patrolConfig.patrolPoints 这里给了两点位置patrolConfig.patrolPoints.Array.data[0]h和patrolConfig.patrolPoints.Array.data[1]后，怪物并没有再两点之间移动 正常怪物出生的位置 走到两点patrolConfig.patrolPoints.Array.data[0]点 再 走 到patrolConfig.patrolPoints.Array.data[1]点 patrolConfig.pingPong 如果勾上就是一直循环，不勾上就不走点


patrolConfig.patrolPoints 这个点同样对跳跃也有用，再两点之间跳跃，两点之间如果跳跃不能过点，到点上方X轴速度为0，怪物垂直落下 选择点之间移动或跳跃 同样支持 转向和自动跳跃 所以摆点的时候会注意不要和 自动跳跃检测体重叠，优先级不用考虑


把脚本分出来了

“MonsterController 只做编排”版本和5个独立逻辑脚本
自动跳跃 = 跳跃内核（JumpCore）+ 自动编排（AutoJumpDriver）

JumpCore 只做物理：起跳、重力、SafeMoveVertical、落地判定；不管许可区/上膛/抑制窗口/转向。

AutoJumpDriver 只做“自动”策略：许可区上膛/保险、落地后悬崖抑制帧、调用 JumpCore 起跳&空中核（你之前的变量、窗口语义完全保留）。

MonsterController

自动转向（AutoTurnLogic）：墙/悬崖检测 + TurnAround 封装，墙线从“脚底+偏移”发射，wallCheckHeightOffset 调节立即可见。

MonsterController

地面直线段（GroundMoveLogic）：遇障碍→优先试自动跳，否则转向；修复了你之前“抑制窗口被第二次 CheckCliffAhead 覆盖”的问题（只用一次合并结果）。

MonsterController







第1个需求
MonsterController要借鉴PlayerController 的移动 跳跃 斜坡移动 斜坡静止 平地走上斜坡  斜坡走下平地  向上走斜坡速度 和向下走胁迫速度要与平地走斜坡速度相同  等物理方式，并且适合怪物编辑器

第2个需求
需要和第1个需求匹配，就是第一个需求好的同时还能满足第2个需求

怪物编辑器已经有一个版本了
完善当前的版本
具体如下：
spawnConfig 出生阶段 这块不用管 已经OK

接下来就是patrolConfig 巡逻阶段

patrolConfig.patrolPoints 这个是生成点，怪物再点之间移动，选择了这个方式怪物就不会自动跳跃了 自动转向了 完全靠点，几个点之间移动
patrolConfig.pingPong 这个功能可以删掉
patrolConfig.movements 这个是可以指定不同的巡逻移动状态 ，有直线移动 和 跳跃移动 ，可以再列表里+ 加入element0、element1……很多状态
patrolConfig.movements.Array.data[0].executeCount，内部element0执行几次 

patrolConfig.randomOrder 勾上就是列表里element0、element1……一直随机，不勾就是按顺序element0、element1……一直循环
patrolConfig.loopAll 这个功能可以删掉

再patrolConfig.movements下element0
patrolConfig.movements.Array.data[0].type  设置类型 straight 或 jump
选择 straight的时候的参数
patrolConfig.movements.Array.data[0].moveSpeed  匀速速度  
patrolConfig.movements.Array.data[0].acceleration  加速度 起步时候  0  加速到  匀速速度   ，如果设置是0  ，没有加速度，直接到达匀速速度
还要增加一个加速时间 缺失
patrolConfig.movements.Array.data[0].deceleration  减速度 减速时候   匀速速度     减速到 0，如果设置是0  ，没有减速度，直接匀速速度降到0
还要增加一个减速时间 缺失
patrolConfig.movements.Array.data[0].restDuration  休息停顿时间  

patrolConfig.movements.Array.data[0].moveAnimation  怪物移动动画
patrolConfig.movements.Array.data[0].restAnimation   怪物休息动画
patrolConfig.movements.Array.data[0].moveEffectOnlyFirst   移动特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是训话播放
patrolConfig.movements.Array.data[0].moveEffectPrefab  指定怪物移动中动画帧（OnPatrolMoveEffect）事件播放特效  
patrolConfig.movements.Array.data[0].restEffectOnlyFirst  休息特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是训话播放
patrolConfig.movements.Array.data[0].restEffectPrefab   指定怪物休息中的动画帧（OnPatrolRestEffect）事件播放特效

patrolConfig.movements.Array.data[0].obstacleBehavior  自动类型 turn 或 auto jump 
选择turn 怪物走到悬崖或墙壁 会自动转向 朝自己朝向的方向移动   墙壁和悬崖已经有检测参数 
wallCheckDistance  检测长度
wallCheckHeightOffset   上下偏移
cliffCheckDistance  检测长度
cliffCheckOffsetX     偏移

auto jump 选项可以删掉  默认都是turn
因为auto jump 是由怪物撞到场景的autoJumpPermitTag的物体就会跳跃（跳跃以后autoJumpIgnoreCliffFrames 8帧不检测 悬崖和 自动跳跃，以免连续）并且撞到墙壁也会转向，所以不需要选项，默认就是turn 


下面的是autoJumpPermitTag触发怪物跳跃的参数
参数
patrolConfig.movements.Array.data[0].autojumpSpeed 匀速速度 X
patrolConfig.movements.Array.data[0].autojumpHeight 跳跃高度 Y
patrolConfig.movements.Array.data[0].autogravityScale  向下重力 系数  ，系数 * 怪物rb2d 下GravityScale 这个值要给>0
patrolConfig.movements.Array.data[0].autojumpDuration  跳跃持续时间  指空中到落地时间，并且这时候 gravityScale 失效 

资源
patrolConfig.movements.Array.data[0].jumpAnimation 怪物跳跃动画
patrolConfig.movements.Array.data[0].jumpRestAnimation 怪物跳跃休息动画
patrolConfig.movements.Array.data[0].jumpEffectOnlyFirst 跳跃特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是训话播放
patrolConfig.movements.Array.data[0].jumpEffectPrefab  指定怪物跳跃中动画帧（OnPatrolJumpEffect）事件播放特效  
patrolConfig.movements.Array.data[0].jumpRestEffectOnlyFirst 跳跃休息特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是训话播放
patrolConfig.movements.Array.data[0].jumpRestEffectPrefab 指定怪物跳跃休息中的动画帧（OnPatrolJumpRestEffect）事件播放特效


当选择 jump的时候的参数
参数
patrolConfig.movements.Array.data[0].jumpSpeed 匀速速度 X
patrolConfig.movements.Array.data[0].jumpHeight 跳跃高度 Y
patrolConfig.movements.Array.data[0].gravityScale  向下重力 系数  ，系数 * 怪物rb2d 下GravityScale    
patrolConfig.movements.Array.data[0].jumpDuration 跳跃持续时间  
patrolConfig.movements.Array.data[0].restEffectPrefab跳跃休息时间 

moveDuration  是跳跃总体时间，比如跳跃速度 重力 让怪物再空中跳跃了3S，设置总时间是2S，那还是按照3S算，只不过落地后大于设定值2S就不跳跃了，如果跳跃速度 重力 让怪物再空中跳跃了3S，总时间是7S，那就让怪物再跳跃2次，落地后因为还剩1秒，所以还要再跳一次
restDuration 是moveDuration 执行完后的最后一跳落地开始计算，落地跳跃休息 不动 

资源
patrolConfig.movements.Array.data[0].jumpAnimation 怪物跳跃动画
patrolConfig.movements.Array.data[0].jumpRestAnimation 怪物跳跃休息动画
patrolConfig.movements.Array.data[0].jumpEffectOnlyFirst 跳跃特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是训话播放
patrolConfig.movements.Array.data[0].jumpEffectPrefab  指定怪物跳跃中动画帧（OnPatrolJumpEffect）事件播放特效  
patrolConfig.movements.Array.data[0].jumpRestEffectOnlyFirst 跳跃休息特效是否只播放一次，选择勾上，动画帧触发播放一次就不再播放，不勾就是循环播放
patrolConfig.movements.Array.data[0].jumpRestEffectPrefab 指定怪物跳跃休息中的动画帧（OnPatrolJumpRestEffect）事件播放特效

patrolConfig.movements.Array.data[0].obstacleBehavior 默认就是 turn 
怪物跳跃撞到墙壁的时候会转向，已经转向后等8帧后再检测，防止一直检测抖动，另外悬崖不检测转向，跳跃仅仅是撞上前方墙才转向
当然也支持怪物跳跃中撞到场景的autoJumpPermitTag的物体再次跳跃，跳跃空中撞到autoJumpPermitTag的物体，从触发那一刻为起点再次跳跃

autoJumpPermitTag 的自动跳跃可以和 type设置类型jump参数不同，资源配置相同

编辑器面板优化，巡逻阶段
选择type  设置类型 straight
直线移动参数和资源
自动跳跃参数和资源

选择type  设置类型 jump
跳跃参数和资源
自动跳跃参数和资源
自动跳跃与跳跃参数不同 ，资源相同

请把以上1和2功能完善，不要删除原来这几个脚本功能配置，需要删除的上面的说明也写了，有些字段虽然是空的，但也是策划预留的一部分
不需要完整代码，不用解释为什么，贴出来代码要改动的位置，怎么替换或删除或增加，不要漏掉




调整下规则

正常跳跃  
moveDuration  是跳跃总体时间，比如跳跃速度 重力 让怪物再空中跳跃了3S，设置总时间是2S，那还是按照3S算，只不过落地后大于设定值2S就不跳跃了，如果跳跃速度 重力 让怪物再空中跳跃了3S，总时间是7S，那就让怪物再跳跃2次，落地后因为还剩1秒，所以还要再跳一次
restDuration 是moveDuration 执行完后的最后一跳落地开始计算，落地跳跃休息 不动 

自动跳跃
patrolConfig.movements.Array.data[0].autojumpSpeed   空中全程都有速度
patrolConfig.movements.Array.data[0].autojumpHeight   
patrolConfig.movements.Array.data[0].autogravityScale
patrolConfig.movements.Array.data[0].automoveDuration   同正常跳跃 设置
patrolConfig.movements.Array.data[0].restDuration 加回来   同正常跳跃 设置

现在结果是 自动跳跃到最高点就垂直掉下来，没有继续往前跳，（补充：怪物撞到AutoJumpZone后，自动跳跃和悬崖就不能再触发，要落地后等autoJumpIgnoreCliffFrames的帧数后才可以触发；但是墙壁的转向要保留，可能跳过去以后墙壁自动转向




自查代码
patrolConfig.movements.Array.data[0].moveAnimation  没指定动画是不能播moveAnimation动画 和 不能播moveEffectPrefab特效的
patrolConfig.movements.Array.data[0].restAnimation  没指定动画是不能播restAnimation动画 和 不能播restEffectPrefab特效的
patrolConfig.movements.Array.data[0].moveEffectPrefab   没指定prefab  ，而动画里给了关键帧onfx ,并且给了特效prefab名字，也不能播moveEffectPrefab特效
patrolConfig.movements.Array.data[0].restEffectPrefab   没指定prefab ，而动画里给了关键帧onfx ,并且给了特效prefab名字，也不能播restEffectPrefab特效
patrolConfig.movements.Array.data[0].moveEffectPrefab   指定了prefab  ，而动画里没给关键帧onfx ,也不能播moveEffectPrefab特效
patrolConfig.movements.Array.data[0].restEffectPrefab   指定了prefab ，而动画里没给关键帧onfx ,也不能播restEffectPrefab特效

patrolConfig.movements.Array.data[0].jumpAnimation  没指定动画是不能播jumpAnimation 和 不能播jumpEffectPrefab特效的
patrolConfig.movements.Array.data[0].jumpRestAnimation  没指定动画是不能播jumpRestAnimation 和 不能播jumpRestEffect特效的
patrolConfig.movements.Array.data[0].jumpEffectPrefab   没指定prefab  ，而动画里给了关键帧onfx ,并且给了特效prefab名字，也不能播jumpEffectPrefab特效
patrolConfig.movements.Array.data[0].jumpRestEffectPrefab    没指定prefab ，而动画里给了关键帧onfx ,并且给了特效prefab名字，也不能播jumpRestEffect特效
patrolConfig.movements.Array.data[0].moveEffectPrefab   指定了prefab  ，而动画里没给关键帧onfx ,也不能播jumpEffectPrefab特效
patrolConfig.movements.Array.data[0].restEffectPrefab   指定了prefab ，而动画里没给关键帧onfx ,也不能播jumpRestEffect特效

自动跳跃资源逻辑同正常跳跃



s动画关键帧还是单独的 ，因为动画可以相同、指定特效也可能相同、但是一条动画里这个动画关键帧一定不同，也绝对不会指定两个相同关键帧
spawnEffectPrefab
idleEffectPrefab
moveEffectPrefab
restEffectPrefab
jumpEffectPrefab
jumpRestEffectPrefab

保持规则：
没有配置动画/Prefab 时，任何情况下都不能播动画/特效；
动画里没给关键帧事件也不能播放特效；
配置了 Prefab 但关键帧事件没给也不能播放特效；
没有在当前段配置的 Prefab 即便 关键帧事件 给了名字也不能播放特效


堆栈执行
 配置了Element0  ，自循环，  正确
如果再配置 Element1，还是   Element0  ，自循环，错误，应该是Element0、Element1、Element0循环下去
如果再配置Element2，Element0、Element1、Element2顺序循环
如果勾选了patrolConfig.randomOrder，随机再Element0、Element1、Element2循环

移动/停下/跳跃/自动转向/自动跳跃/动画/特效全部走“非路点巡逻”的同一套底层逻辑。
路点只用来“到点就推进下一个（0..N..0）并在接地且允许转向时纠正朝向”。跳跃可越过路点，不会被中途强制拐头；落地恢复直线相位后再朝目标纠正。


要给巡逻阶段特效增加 位置点 fxSpawnPoint、fxIdlePoint、fxMovePoint、fxRestPoint、fxJumpPoint、fxJumpRestPoint




首先发现阶段的模式 移动发现 和跳跃发现 ，相当于巡逻阶段类型移动和跳跃，只不过没有路点 

所以代码应该怎么设计，比如 巡逻类型 移动类型 和  跳跃类型里面的参数 配置 逻辑 资源 动画 特效 规则 转向 自动跳跃 这些都好了 ，后面就不会再动了，巡逻阶段也不会再动了，后面新增加的比如发现阶段也是引用，巡逻阶段的底层，参数是新的一套、动画特效新的一套，底层没区别 
讨论下代码是不是需要拆分出来 或者 不拆分 

发现阶段多了一个与玩家的直线距离判断，设定的距离内，背对玩家怪物会转向转向朝玩家移动或跳跃移动，没有被动直接朝玩家移动或跳跃移动

发现阶段的模式 移动发现 和跳跃发现  ，各自独立的参数 动画 特效配置，动画特效配置同巡逻特效动画配置方式一样


先介绍移动发现阶段里面分3种状态：
1发现移动距离：一直朝向玩家方向移动 ，这个就是直接判断与玩家间距离，
怪物与玩家互动：怪物发现玩家后，玩家逃走超出了判定距离，就回到巡逻移动阶段，如果怪物一直保持和玩家发现距离内，怪物就一直追赶
参数设定: findmoveSpeed、findacceleration、findaccelerationTime、finddeceleration、finddecelerationTime、findmoveDuration、findrestDuration   底层逻辑公用巡逻阶段，参数全新
动画资源: prefabfindmoveAnimation、findrestAnimation    
特效prefab：findmoveEffectPrefab、findrestEffectPrefab  (支持prefab 或序列帧动画)   
动画播放特效关键帧:findmoveEffectPrefab、findrestEffectPrefab     动画关键帧触发特效的规则同巡逻阶段 移动

2发现后退移动距离：朝玩家反方向后退移动，怪物走到玩家的多少距离后会转向后退移动， 
怪物与玩家互动: 首要条件是怪物发现了，再发现距离之内，所以后退距离一定小于发现距离，当怪物接近玩家再发现后退距离以内，怪物就后退，后退中如果怪物设置了休息（不动）的时候，需要转向玩家（背对玩家走一段，休息转过来看看玩家的这种感觉），如果玩家继续追赶再转头背对玩家移动
当怪物接近玩家再发现后退距离以外，进入正常发现距离阶段，怪物就朝向玩家追赶，形成拉锯
参数设定:  同发现倒退移动距离
动画资源：发现移动距离
特效prefab：发现移动距离
动画播放特效关键帧 ：发现移动距离

3发现倒退移动距离 ：向玩家反方向倒退（脸朝玩家，方向向后倒着走），怪物走到玩家的多少距离后会倒退， 新参数: 发现倒退距离 
怪物与玩家互动：首要条件是怪物发现了，再发现距离之内，所以倒退距离一定小于发现距离，怪物接近玩家再发现倒退距离以内，怪物就倒退，后退中如果怪物设置了休息（不动）的时候，需要怪物停下
当怪物接近玩家再发现倒退距离以外，进入正常发现距离阶段，怪物就追赶，形成拉锯
参数设定: backmoveSpeed、backacceleration、backaccelerationTime、backdeceleration、backdecelerationTime、backmoveDuration、 backrestDuration 底层逻辑公用巡逻阶段，参数全新
动画资源：backmoveAnimation，休息同发现移动距离休息
特效prefab：发现移动距离
动画播放特效关键帧 ：发现移动距离


现在介绍跳跃发现阶段里面分3种状态：
1发现跳跃距离：一直朝向玩家方向跳跃 ，这个就是直接判断与玩家间距离（跳跃超过了设定距离也要完成那次跳跃，落地后再调整）
怪物与玩家互动：怪物发现玩家后，玩家逃走超出了判定距离，就回到巡逻跳跃阶段，如果怪物一直保持和玩家发现距离内，怪物就一直跳跃追赶
参数设定: findjumpSpeed 、findjumpHeight、  findgravityScale、 findjumpDuration、findjumpRestDuration  底层逻辑公用巡逻阶段，参数全新
动画资源: findjumpAnimation、findjumpRestAnimation
特效prefab:findjumpEffectPrefab、findjumpRestEffectPrefab (支持prefab 或序列帧动画)
动画播放特效关键帧: findjumpEffectPrefab、findjumpRestEffectPrefab 动画关键帧触发特效的规则同巡逻阶段 跳跃

2发现后退跳跃距离：朝玩家反方向后退跳跃，怪物走到玩家的多少距离后会转向后退跳跃 （跳跃超过了设定距离也要完成那次跳跃，落地后再调整）
怪物与玩家互动: 首要条件是怪物发现了，再发现距离之内，所以后退跳跃距离一定小于发现跳跃距离，当怪物接近玩家再发现后退距离以内，怪物就后退跳跃，后退跳跃中怪物也设置了休息（不动），如果实际跳跃时间小于设定时间，多跳一次，落地才开始计算休息时间，如果实际跳跃时间大于设定时间，设定时间到了也要完成最后一跳，落地计算休息时间，这个和巡逻期间跳跃底层设计一样
当怪物接近玩家再发现后退跳跃距离以外，进入正常发现跳跃距离阶段，怪物就朝向玩家跳跃追赶，形成拉锯
参数设定: 发现倒退跳跃距离参数
动画资源：发现跳跃距离
特效prefab：发现跳跃距离
动画播放特效关键帧 ：发现跳跃距离

3发现倒退跳跃距离 ：向玩家反方向倒退跳跃（脸朝玩家，方向向后倒着跳跃），怪物跳跃到玩家的多少距离后会倒退跳跃 （跳跃超过了设定距离也要完成那次跳跃，落地后再调整）
怪物与玩家互动：首要条件是怪物发现了，再发现距离之内，所以倒退跳跃距离一定小于发现跳跃距离，怪物接近玩家再发现倒退距离以内，怪物就倒退跳跃，倒退跳跃中如果怪物设置了休息（不动）的时候，需要怪物落地后转向玩家（背对玩家跳跃一段，落地后休息转过来看看玩家的这种感觉）如果实际跳跃时间小于设定时间，也要多跳一次，落地才开始计算休息时间，如果实际跳跃时间大于设定时间，设定时间到了也要完成最后一跳，落地计算休息时间，这个和巡逻期间跳跃底层设计一样
当怪物接近玩家再发现倒退跳跃距离以外，进入正常发现跳跃距离阶段，怪物就跳跃追赶，形成拉锯
参数设定: backjumpSpeed、backjumpHeight、backgravityScale、backjumpDuration、backjumpRestDuration  底层逻辑公用巡逻阶段，参数全新
动画资源: backjumpAnimation、休息发现跳跃距离休息
特效prefab：发现跳跃距离
动画播放特效关键帧:  发现跳跃距离

以上移动发现和跳跃发现增加3个公用参数：发现距离参数（公用：发现移动距离和发现跳跃距离）、发现后退距离参数（公用：发现后退移动距离和发现后退跳跃距离）、发现倒退距离 参数（公用：发现倒退移动距离 和 发现倒退跳跃距离）需要绘制这3根线的显示圆圈，方便调试，发现距离红色，发现后退距离白色，发现倒退距离黑色，不需要定制颜色，直接给颜色

发现阶段的模式  可以列表+ 添加  移动发现  或 跳跃发现 ,elevent0自己循环，如果添加了elevent0、elevent1，elevent0与elevent1按顺序循环
findrandomOrder 勾上随机播放elevent

特效位置得锚点（已作废，全部换成了巡逻阶段的锚点）
FX_FindMove / FindMovePoint
FX_FindRest / FindRestPoint
FX_FindJump / FindJumpPoint
FX_FindJumpRest / FindJumpRestPoint
FX_BackMove / BackMovePoint
FX_BackRest / BackRestPoint
FX_BackJump / BackJumpPoint
FX_BackJumpRest / BackJumpRestPoint


发现阶段，再倒退或后退中给一个选项，就在backRange的下方
如果勾上就是怪物靠近墙壁或悬崖就自动朝玩家方向跳跃，如果不勾保持现有代码已有原状态

另外reverseRange阶段会让怪物休息的时候朝向玩家，这个可以去掉，休息的时候不在朝向玩家

发现阶段后退和倒退距离休息期间，要关闭后退和倒退的检测距离，例如：后退和倒退移动结束以后，进入休息时间10S，这10S内后退和倒退距离检测关闭，这时候如果玩家再发现距离内， 就执行发现移动或发现跳跃，10S以后玩家还在后退和倒退距离检测内，就执行后退倒退移动或跳跃


再发现阶段里还有攻击

攻击列表+ 添加  攻击0 elevent0自己循环，如果添加了攻击0 elevent0、攻击1 elevent1，攻击0 elevent0与攻击1 elevent1按顺序循环
elevent0 下的参数：
攻击类型：近战攻击  和 远程攻击


1近战攻击 
近战攻击距离：近战检测距离，只要再这个距离内，怪物就要攻击，播放攻击动画（需要绘制近战检测距离的圆圈 黄色，不需要定制颜色，直接给颜色）
攻击时间：攻击时间内怪物发出攻击，如果设定攻击时间<攻击动画时间，强制攻击结束，进入攻击休息时间；如果设定攻击时间>攻击动画时间，设定攻击时间除攻击动画时间 向上取整，结束攻击动画再计算攻击休息时间
攻击休息时间：攻击时间结束后，进入攻击休息时间，关闭攻击距离检测，发现移动距离 或 发现后退移动距离 或 发现倒退移动距离自动生效，例如：攻击最后一帧结束以后，间隔10S，10S内攻击距离检测关闭，这时候如果玩家再发现后退移动距离内 就执行发现后退 或者 再发现倒退移动距离内 就发现倒退 或者 发现移动距离内 就发现移动
攻击动画资源：attackAnimation

攻击特效prefab：attackEffectPrefab
攻击动画播放特效关键帧 ：attackEffectPrefab    
（如果添加了elevent1，那elevent1下面的
攻击动画资源：attackAnimation
攻击特效prefab：attackEffectPrefab (支持prefab 或序列帧动画)
攻击动画播放特效关键帧 ：attackEffectPrefab    
是新的资源，与elevent0不同）

近战攻击
动画attackAnimation 里 对应播放特效关键帧 attackEffectPrefab    ，关键帧对应的特效是attackEffectPrefab    
缺少动画attackAnimation不能播放特效attackEffectPrefab
缺少关键帧attackEffectPrefab不能播放特效attackEffectPrefab

近战攻击伤害检测体：可以给怪物新子物体指定collider2d istrigger ，并且再attackAnimation 动画内指定function 攻击判定帧 attackAnimationstart、attackAnimationend，再此期间攻击判定

攻击中有移动中攻击或跳跃中攻击：

移动中攻击：
播放攻击动画的同时可以给怪物移动速度，这个没有资源，只提供移动
参数：
attackmoveSpeed、attackacceleration、attackaccelerationTime、attackdeceleration、attackdecelerationTime ，attackmoveDuration，
这几个参数只在攻击时间内有效，攻击休息时间失效，这些只提供移动效果，没有动画特效，这里的移动中攻击的移动逻辑同巡逻移动底层逻辑一致。
举例：由速度0加速1S后到匀速速度1，匀速速度1再匀速移动1S，由匀速速度1减到0速需要1S

跳跃中攻击：
播放攻击动画的同时可以给怪物跳跃能力，这个没有资源，只提供跳跃
参数：
attackjumpSpeed 、attackjumpHeight、  attackgravityScale、 attackjumpDuration、attackjumpRestDuration ，当设定跳跃时间>攻击动画时间 = 空中攻击最后一帧一直保持到落地，落地后才算完成一次攻击；当设定跳跃时间<攻击动画时间 = 攻击结束最后一帧算完成一次攻击 ；这些只提供跳跃效果，没有动画特效，这里的跳跃中攻击的跳跃逻辑同巡逻移跳跃层逻辑一致





2远程攻击
远程攻击距离：远程攻击检测距离，只要再这个距离内，怪物就要攻击，播放远程攻击动画（需要绘制远程攻击检测距离的圆圈 蓝色，不需要定制颜色，直接给颜色）
远程攻击时间：远程攻击时间内怪物发出攻击，如果远程攻击时间<远程攻击动画时间，强制远程攻击结束，进入远程攻击休息时间；如果远程攻击时间>远程攻击动画时间，只远程攻击一次，停留在远程攻击最后一帧，直到远程攻击时间结束
远程攻击休息时间：远程攻击时间结束后，进入远程攻击休息时间，关闭远程攻击距离检测，发现移动距离 或 发现后退移动距离 或 发现倒退移动距离自动生效，例如：远程攻击最后一帧结束以后，间隔10S，10S内远程攻击距离检测关闭，这时候如果玩家再发现后退移动距离内 就执行发现后退 或者 再发现倒退移动距离内 就发现倒退 或者 发现移动距离内 就发现移动
攻击动画资源：attackFarAnimation
远程攻击特效prefab：attackFarEffectPrefab (支持prefab 或序列帧动画)
远程攻击动画播放特效关键帧 ：attackFarEffectPrefab    （如果添加了elevent1，那elevent1下面的远程攻击动画资源：attackFarAnimation远程攻击特效prefab：attackFarEffectPrefab远程攻击动画播放特效关键帧 ：attackFarEffectPrefab    是新的资源，与elevent0不同）

远程移动中攻击：
播放远程攻击动画的同时可以给怪物移动速度
参数：
attackFarmoveSpeed、attackFaracceleration、attackFaraccelerationTime、attackFardeceleration、attackFardecelerationTime ，这几个参数只在攻击时间内有效，攻击休息时间失效，这些只提供移动效果，没有动画特效，这里的移动逻辑同巡逻移动底层逻辑一致。
举例：由速度0加速1S后到匀速速度1，匀速速度1再匀速移动1S，由匀速速度1减到0速需要1S

远程跳跃中攻击：
播放攻击动画的同时可以给怪物跳跃能力
参数：
attackjumpSpeed 、attackjumpHeight、  attackgravityScale、 attackjumpDuration、attackjumpRestDuration ，当攻击动画时间<跳跃时间 = 空中攻击最后一帧一直保持到落地，落地后才算完成一次攻击；当攻击动画时间>跳跃时间 = 攻击结束最后一帧算完成一次攻击 ；这些只提供跳跃效果，没有动画特效，这里的跳跃中攻击的跳跃逻辑同巡逻移跳跃层逻辑一致

远程攻击飞行物释放位置：可以给怪物新子物体(空物体)指定 ，并且再attackFarAnimation 动画内指定function 攻击判定帧 attackFarAnimation，再这帧以及怪物的子物体上释放远程攻击飞行物


远程攻击飞行物：
参数：
飞行物绑定怪物子物体位置
飞行物攻击伤害检测，可以指定collider2d istrigger
飞行物同时发射个数
飞行物同时发射个数间隔时间（例如一次发3颗，每颗间隔0.2S）
飞行物发射频率完全取决于远程攻击动画播放特效关键帧attackFarEffectPrefab   
每个飞行物存活：时间
飞行物释放扇形：扇形角度，随机或均匀分布
飞行物动画资源：FlygunAnimation
飞行物特效资源：FlygunEffectPrefab (支持prefab 或序列帧动画)


远程攻击飞行物类型

飞行物直线移动
参数：
直线移动朝向：自定义角度移动或一直朝玩家方向移动
直线移动匀速速度
直线移动匀速时间
直线移动加速度：飞行物起步移动的时候加速
直线移动加速度时间
直线移动减速度：飞行物停下的时候减速
直线移动减速度时间
举例：由速度0加速1S后到匀速速度1，匀速速度1再匀速移动1S，由匀速速度1减到0速需要1S
停下休息时间，移动一段时间后停下休息不动
是否跟踪玩家，可设置跟踪强度比%，直线与跟踪混合强度
跟踪的参数飞行物直线移动参数，不需要设置

直线移动类型包括：S型直线sin移动、直线回旋镖、旋转移动、抛物线移动
如果勾选跟踪，以下飞行类型都再跟踪基础上跟踪S型直线sin移动、跟踪直线回旋镖、跟踪旋转移动、跟踪抛物线移动

S型直线sin移动：飞行物自身sin旋转
sin 参数：振幅（例如：上下摆动2米）和频率（例如：每秒摆动3次）
是否一直朝着移动方向，如果是沿着移动方向旋转（自动面向路径切线）如果否不改变自身朝向

直线回旋镖：飞行物飞出去停顿后再飞回来
参数：飞出最远距离、最远距离停顿时间、回旋回来移动匀速速度、回旋回来移动匀速速度时间、回旋回来移动加速度、回旋回来移动加速度时间、回旋回来移动减速度、回旋回来移动减速度时间
是否一直朝着移动方向，如果是沿着移动方向旋转（自动面向路径切线），如果否不改变自身朝向

旋转移动：飞行物按照一定半径圆形轨迹按照直线速度speed螺旋旋转前进飞行
参数：旋转半径、角速度
是否一直朝着移动方向，如果是沿着移动方向旋转（自动面向路径切线），如果否不改变自身朝向

抛物线移动：飞行物撞到场景碰撞体会反弹
参数：
发射角度：按照直线速度speed，按照设定角度释放
向下的力：受到向下的力影响会抛物线下坠
是否反弹力：勾上就会反弹
是否一直朝着移动方向，如果是沿着移动方向旋转（自动面向路径切线），如果否不改变自身朝向

飞行物的moveType的类型：直线/S型/抛物线/半径旋转/回旋镖/跟踪，
再一个类型里，不需要分开

举个例子：给了速度就是沿直线移动，再给半径就可以沿着半径画圆旋转，如果sin就可以S型移动，如果加重力等就可以抛物线，还可以增加回旋飞行模式

说下层级关系：
直线移动：向设定方向移动
S型移动：原地上下移动
回旋镖：原地向前再向后
抛物线：原地向上再落下
旋转半径：原地按照半径圆路径移动

层级之间的叠加

直线移动+S型移动=向前移动的同时上下移动
直线移动+回旋镖=直线飞出移动再飞回
直线移动+抛物线=向前抛物线飞出后下落
直线移动+旋转半径=自身按照半径圆形路径移动，同时半径圆形直线移动

直线移动+S型移动+抛物线=自身向前上下移动同时整体抛物线飞出
直线移动+S型移动+回旋镖=自身向前上下移动同时飞出后一定距离按照S型移动飞回
直线移动+S型移动+旋转半径=自身上下移动同时按照半径圆形路径移动，整体向前移动

直线移动+旋转半径+S型移动=自身按照半径圆形路径移动的同时整体向前上下移动
直线移动+旋转半径+抛物线=自身按照半径圆形路径移动的同时整体抛物线飞出，如果反弹，也是按照自身按照半径圆形路径移动的同时整体抛物线反弹
直线移动+旋转半径+回旋镖=自身按照半径圆形路径移动的同时整体向前飞出后一定距离按照圆形路径飞回

直线+S：向前 + 上下
直线+回旋镖：前进/回程
直线+抛物线：向前 + 整体抛飞/落下
直线+旋转半径：螺旋前进
直线+S+抛物线：向前 + 上下 + 整体抛飞
直线+S+回旋镖：上下摆动的飞出/飞回
直线+S+旋转半径：上下 + 绕圈 + 前进
直线+旋转半径+S：等价（顺序不同结果相同）
直线+旋转半径+抛物线：绕圈 + 整体抛飞（若反弹则绕圈+整体抛物线反弹）
直线+旋转半径+回旋镖：绕圈 + 飞出/飞回



远程攻击飞行物命中墙壁或玩家会爆炸
参数：爆炸范围、爆炸伤害、爆炸持续时间(持续时间内一直伤害)、伤害间隔（多少时间伤害一次）
飞行物爆炸动画资源：FlygunBoomAnimation
飞行物爆炸特效资源：FlygunBoomEffectPrefab (支持prefab 或序列帧动画)

未来飞行物 还要死亡区域检测 ，暂时先不考虑，近战攻击和远程飞行物攻击伤害暂时不加入


findmove里的动画、特效、关键帧 不可以 和 findjump里的动画、特效、关键帧混用

findmove
动画findmoveAnimation 里 对应关键帧 findmoveEffectPrefab，关键帧对应的特效是findmoveEffectPrefab
缺少动画findmoveAnimation不能播放特效findmoveEffectPrefab
缺少关键帧findmoveEffectPrefab不能播放特效findmoveEffectPrefab
缺少特效findmoveEffectPrefab不能播特效findmoveEffectPrefab
动画findrestAnimation 里 对应关键帧 findrestEffectPrefab，关键帧对应的特效是findrestEffectPrefab
缺少动画findrestAnimation不能播放特效findrestEffectPrefab
缺少关键帧findrestEffectPrefab不能播放特效findrestEffectPrefab
缺少特效findrestEffectPrefab不能播特效findrestEffectPrefab

reversemove
动画、关键帧、特效同findmove


backmove
只有动画backmoveAnimation  不同于 findmove里的findmoveAnimation动画
动画backmoveAnimation里 对应关键帧 findmoveEffectPrefab，关键帧对应的特效是findmoveEffectPrefab
动画、关键帧、特效同findmove

findjump
动画findjumpAnimation 里 对应关键帧 findjumpEffectPrefab，关键帧对应的特效是findjumpEffectPrefab
缺少动画findjumpAnimation不能播放特效findjumpEffectPrefab
缺少关键帧findjumpEffectPrefab不能播放特效findjumpEffectPrefab
缺少特效findjumpEffectPrefab 不能播特效findjumpEffectPrefab
动画findjumpRestAnimation 里 对应关键帧 findjumpRestEffectPrefab，关键帧对应的特效是findjumpRestEffectPrefab
缺少动画findjumpRestAnimation不能播放特效findjumpRestEffectPrefab
缺少关键帧findjumpRestEffectPrefab不能播放特效findjumpRestEffectPrefab
缺少特效findjumpEffectPrefab 不能播特效findjumpEffectPrefab

reversejump
动画、关键帧、特效同findjump

backjump
只有动画backjumpAnimation  不同于 findjump里的findjumpAnimation 动画
动画backjumpAnimation 里 对应关键帧 findjumpEffectPrefab，关键帧对应的特效是findjumpEffectPrefab
动画、关键帧、特效同findjump


在发现阶段的特效入口按当前事件模式强制过滤：
mode=Move 时仅响应 findmoveEffectPrefab / findrestEffectPrefab
mode=Jump 时仅响应 findjumpEffectPrefab / findjumpRestEffectPrefab
这样，即便移动与跳跃共用同一个动画剪辑、且剪辑里只有“移动事件”，在 Jump 模式下也不会误播移动特效。


编辑器折叠分类功能

出生阶段positionType
选择 point的时候spawnConfig.areaCenter，spawnConfig.areaSize折叠
选择area的时候 spawnPoints、sequentialSpawn折叠

巡逻阶段type
选择straight的时候，参数：jumpSpeed、jumpHeight、gravityScale、jumpDuration、jumpRestDuration这些折叠
选择jump的时候，参数：moveSpeed、acceleration、deceleration、accelerationTime、decelerationTime、moveDuration、restDuration这些折叠
资源：moveAnimation、restAnimation、moveEffectPrefab、restEffectPrefab这些折叠
这些再straight和jump的时候都要有，jumpAnimation、jumpRestAnimation、jumpEffectPrefab、jumpRestEffectPrefab


发现阶段mode
选择move的时候，这些全部折叠findjumpSpeed、findjumpHeight、findgravityScale 、findjumpDuration 、findjumpRestDuration 、backjumpSpeed 、backjumpHeight、backgravityScale 、backjumpDuration 、backjumpRestDuration 、findjumpAnimation、findjumpRestAnimation、findjumpEffectPrefab、findjumpRestEffectPrefab


选择jump的时候，这些全部折叠、findmoveSpeed、findacceleration、findaccelerationTime、finddeceleration、finddecelerationTime、findmoveDuration、findrestDuration、backmoveSpeed、backacceleration、backaccelerationTime、backdeceleration、backdecelerationTime、backmoveDuration、backrestDuration、findmoveAnimation、findrestAnimation、findmoveEffectPrefab、findrestEffectPrefab





 


空中怪物类型
分为出生阶段、巡逻阶段、发现阶段

出生阶段： 同地面出生相同，不需要从新制作，公用一个出生面板，这块不需要从新做，特效动画都是公用面板
只不过地面出生会有一个重力，空中怪物出生是没有重力的，所以会漂浮在空中出生，不会落地，这块可以再原有的地面出生加一个空中出生选项，选了空中出生就不会落到地面上
特效、动画、触发特效关键帧都是和地面出生一样的公用


空中巡逻阶段：
设置选项：怪物是否可以穿透场景 或者 不能穿透（如果不能穿透需要撞墙后朝法线方向反弹）
增加选项：怪物是否一直朝向移动的方向 ，是朝向，否不朝向


增加新的空中巡逻移动列表+， element0、 element1等，从上到下依次执行 或 随机（可以配置不同空中巡逻移动）
基础空中移动：
在一个方形区域内（areaCenter、areaSize）随机朝不同方向移动，每次移动后可以静止休息，移动有加速度、加速度时间，减速度、减速度时间，匀速速度、匀速时间，同地面移动一样，
速度0，再加速度时间内，升到1，再1的匀速速度运行匀速时间后减速，由速度1，再减速度时间内，速度降到0


特殊移动：
这里要定义一个空中怪物的飞行类型，再随机朝不同方向移动的同时，自身路径种类：S型路径移动、半径圆形路径移动
（这个类似地面类型里攻击飞行物）

S型路径移动：上下移动
参数：
上下摆动频率和强度


基础空中移动 可以 和 特殊移动叠加


从新看下逻辑
1选择了空中阶段（airPhaseConfig.airPhaseID=0），出生后要悬浮再空中不会落地
如果先择了地面阶段（airPhaseConfig.groundPhaseID=0），出生后落地

2再以下区域参数

AreaRandom（区域内随机方向，移动时间结束就改变方向）
段起点随机挑一个2D方向，按该方向直线推进（用配置的加/匀/减速）。
碰到区域边界时“反弹”：向量反射，位置夹回区域内，速度标量不变。
朝向只看水平分量：x 改变正负时才左右翻面；纯竖直反弹不改变朝向（不做“上下转向”）。
正弦摆动沿当前运动方向的法线（看起来像“蛇形”）。

AreaRandomH（区域内给一个随机45f, -45f, 135f, -135f角度方向，移动时间结束就改变方向，按照随机45f, -45f, 135f, -135f角度方向，撞到墙壁后的转向和移动同AreaRandom规则）
段起点随机挑一个2D方向，按该方向直线推进（用配置的加/匀/减速）。
碰到区域边界时“反弹”：入射角等于反射角，速度标量不变
朝向只看水平分量：x 改变正负时才左右翻面；纯竖直反弹不改变朝向（不做“上下转向”）。
正弦摆动沿当前运动方向的法线（看起来像“蛇形”）。

AreaRandomH与AreaRandom的区别就是移动时间结束后是否从新改变方向


AreaHorizontal（水平）
只在 X 轴向左右移动（主速度为水平，Y 不随主运动改变；若开正弦，仅用于上下摆动）。
触到左/右边界时“立即反向”：把水平方向符号翻转（左→右或右→左），并把位置夹回边界内；不做斜向反射。
朝向随水平正负翻转；不会因为上下摆动而改变朝向。

AreaVertical（竖直）
只在 Y 轴向上下移动（主速度为竖直，X 不随主运动改变；若开正弦，仅用于左右摆动）。
触到上/下边界时“立即反向”：把竖直方向符号翻转（上→下或下→上），并把位置夹回边界内；不做斜向反射。
朝向保持初始左右面向，不因上下移动改变；只有当出现显著水平分量（一般不会）才会发生“水平翻面”。

反弹点区域area使用boxcollider2d的中心点，场景碰撞体使用boxcollider2d

3airStageConfig.patrol.elements.Array.data[0].sinEnabled
这个水平摆动不一定是水平，要看区域移动类型决定朝向哪里摆动，摆动方向与移动方向垂直

空中巡逻阶段资源

动画
SkymoveAnimation
SkyrestAnimation
特效
SkymoveEffectPrefab
SkyrestEffectPrefab
动画里播放特效事件关键帧
SkymoveEffectPrefab
SkyrestEffectPrefab
特效释放的锚点(增加空中特效锚点)
fxSkyMovePoint
fxSkyRestPoint



空中空中发现阶段：玩家进入怪物发现距离后，怪物就脱离巡逻阶段，脱离AREA巡逻区域失效，如果玩家脱离怪物发现阶段，怪物会回到巡逻区域，播放巡逻阶段的动画、特效、速度参数，继续再巡逻区域巡逻
当玩家进入怪物的发现阶段，怪物会跟踪玩家

空中发现阶段参数与功能（类似地面巡逻阶段的发现）：
三档水平距离(Gizmos:绿=发现,白=后退,黑=倒退，类似地面阶段发现的辅助显示)
SkyfindRange：小于等于该距离进入跟踪状态，跟踪到玩家附近，不会与玩家重叠，跟踪的参考点以怪物根物体Monster_test_Root下monsterDistPoint点，与玩家的PlayerRoot下的PlayerDistPoint点作为检测（这个再怪物Monster_test_Root下的inspector下的monsterDistPoint和playerDistPoint已经有功能）期间撞到建筑物不转向

SkyreverseRange：小于等于该距离进入后退状态，玩家转向背对玩家后退移动，后退的方向是跟踪状态最后转换成后退/倒退状态的相反角度，例如：跟踪最后的角度是30度，这时候进入倒退/后退后的角度方向30度+180度，期间撞到建筑物转向

SkybackRange：小于等于该距离进入到退状态，玩家面朝玩家倒退移动，倒退的方向是跟踪状态转最后换成后退/倒退状态的相反角度，例如：跟踪最后的角度是30度，这时候进入倒退/后退后的角度方向30度+180度，期间撞到建筑物不转向

空中发现阶段后退检测周期性屏蔽，当SkyreverseRange和SkybackRange屏蔽的时候进入SkyfindRange阶段，暂时将SkyreverseRange和SkybackRange的距离设置成0，等SkybackDCTMin和SkybackDCTMax时间过后恢复成设置的SkyreverseRange和SkybackRange参数
SkybackDCTMin：将SkyreverseRange和SkybackRange的距离设置成0的最短时间
SkybackDCTMax：将SkyreverseRange和SkybackRange的距离设置成0的最长时间
参考下地面阶段发现的backDCTMin和backDCTMax的底层设计

朝向：两个选项（一直朝向玩家移动的方向、一直朝向玩家水平移动的方向）这个以Monster_test_Root的子物体monsterDistPoint作为自转的点
朝向已SkyreverseRange和SkybackRange生效，这两个状态会一直朝向玩家，只不过这里设置是任意角度还是水平角度，SkyreverseRange失效，因为怪物会背对玩家



空中发现阶段 资源（Move：Skyfind/Skyretreat 共用；Skyback 仅 move 动画不同）

动画
SkyFind/SkyRetreat Move Animation：发现时候移动动画
SkyFind/SkyRetreat Rest Animation：发现时候休息动画

特效
SkyFind/SkyRetreat Move FX：发现时候移动播放特效
SkyFind/SkyRetreat Rest FX：发现时候休息播放特效

动画里播放特效事件关键帧
SkyfindmoveEffectPrefab：发现时候移动动画上的事件关键帧特效
SkyfindrestEffectPrefab：发现时候休息动画上的事件关键帧特效

空中特效锚点（根物体下Inspector，fxSkyRestPoint的下方生成）
fxSkyfindMovePoint：发现时候移动播放特效的位置点
fxSkyfindRestPoint：发现时候休息播放特效的位置点

空中发现阶段随机播放发现动作
SkyfindRandomOrder：发现阶段的列表是否随机，否顺序播放

空中发现阶段移动列表，list
空中follow阶段参数
SkyhomingFrequency：跟新角度的频率（参考地面发现阶段攻击飞行物跟踪）
SkyhomingStrength：跟踪强度（参考地面发现阶段攻击飞行物跟踪）
SkyfindmoveSpeed：匀速速度
Skyfindacceleration：加速度
SkyfindaccelerationTime：加速度时间
Skyfinddeceleration：减速度
SkyfinddecelerationTime：减速度时间
SkyfindmoveDuration：匀速速度时间
SkyfindrestMin：休息最小时间
SkyfindrestMax：休息最大时间

SkysinEnabled 启用上下摆动（S型），参考空中巡逻阶段的底层，沿着移动的方向
上下摆动频率
下辖摆动幅度

空中backstep阶段参数
SkybackmoveSpeed：匀速速度
Skybackacceleration：加速度
SkybackaccelerationTime：加速度时间
Skybackdeceleration：减速度
SkybackdecelerationTime：减速度时间
SkybackmoveDuration：匀速速度时间
SkybackrestMin：休息最小时间
SkybackrestMax：休息最大时间




空中发现攻击（可以直接引用地面阶段的发现攻击底层，只是参数和资源不同）

再空中发现动作列表（count=1）下面增加发现攻击（可以直接引用地面阶段的发现攻击底层，只是参数和资源不同）

SkyattacksRandomOrder空中随机播放攻击动作

空中攻击列表-空中攻击0

空中通用时序
SkyattackDuration：本次攻击的时间窗口（秒）。在该时间内可循环播放攻击动画并触发效果
SkyrepeatedHitsCount：在 attackDuration 时间窗内，攻击动画循环播放的次数（动画播完一遍算一次
SkyattackRestMin：攻击结束后进入攻击休息区间下限（秒）
SkyattackRestMax： 攻击结束后进入攻击休息区间上限（秒）

空中近战
空中近战触发距离：在这个距离内触发近战攻击 ，辅助线框的颜色绿色
空中近战动画：SkyattackAnimation
空中近战特效：SkyattackEffectPrefab；空中近战特效再动画内事件播放关键帧：SkyattackEffectPrefab；空中近战攻击的关键帧：SkyattackAnimationstart、SkyattackAnimationend

空中近战攻击释放特效点的路径SkyattackSpawnChildPath（参考地面近战攻击的路径逻辑）
空中命中子物体路径：meleeHitboxChildPath

空中远程
空中远程触发距离：在这个距离内触发远程攻击，辅助线框的颜色蓝色
空中远程动画：SkyattackFarAnimation
空中远程特效：SkyattackFarEffectPrefab；空中远程特效再动画内事件播放关键帧：SkyattackFarEffectPrefab；空中远程飞行物再动画内事件播放关键帧：SkyattackFarFire

Skyprojectile配置（飞行物配置）
飞行物发射队列
SkycountPerBurst：一次动画触发发射的数量
SkyintraBurstInterval：同一触发内连发的间隔（秒）
SkylifeTime：投射物存活时间（秒）

飞行物扇形分布
SkyspreadAngle：多发时的扇形角度（度），0 表示同向
SkyspreadUniform：多发时在扇形内是否均匀分布（false 则随机分布）

飞行物表现资源
SkyFlygunAnimation：飞行中的动画名（飞行物自己的动画）
SkyFlygunEffectPrefab：飞行中的特效Prefab（飞行物的特效）
SkyattackFarSpawnChildPath：空中发射飞行物的点路径（参考地面远程攻击飞行物的路径逻辑）

飞行物自身旋转
SkyselfRotate：是否飞行物自身旋转，勾上自身旋转
xyz：再不同轴向自转
SkyselfRotateSpeedDeg：旋转速度（度/秒），对勾选的轴生效

SkyfaceAlongPath勾选后：根对象沿移动方向自动朝向；若“自身旋转”启用，本项失效

飞行物发射朝向
SkyspawnAim下 ：Skytowards player / Skyhorizontal to player
Skytowards player=朝向玩家飞；Skyhorizontal to player=按水平朝向玩家飞（忽略Y）

飞行物爆炸表现
Skyradius：爆炸半径（米）
Skyduration：爆炸表现持续时间（秒）
Skyinterval：爆炸伤害/子效果的tick间隔（秒）
SkyFlygunBoomAnimation：爆炸动画名（飞行物转到玩家、场景，或生命周期结束，爆炸的时候释放爆炸动画）
SkyFlygunBoomEffectPrefab：爆炸特效Prefab（飞行物转到玩家、场景，或生命周期结束，爆炸的时候释放爆炸特效）

飞行物直线移动
SkylinearEnabled：启用直线基线推进（speed/accel等），启用后显示下面的参数，关闭后不使用直线推进（回旋镖返程不受影响）
Skyspeed：初始速度（米/秒）
Skyaccel：加速度（米/秒²），当 accelTime<=0 时使用该值
SkyaccelTime：加速时间（秒），>0 时按时间插值至目标速度
Skydecel：减速度（米/秒²），当 decelTime<=0 时使用该值
SkydecelTime：减速时间（秒），>0 时按时间插值至 0
SkymoveDuration：匀速阶段持续时间（秒），0 表示无匀速直接进入减速/结束

飞行物S型直线（侧向正弦）
SkysinEnabled：启用 S 型侧向偏移，启用后显示下面的参数
SkysinAmplitude：正弦摆动幅度
SkysinFrequency：正弦摆动频率（Hz）

飞行物抛物线（重力）
SkyparabolaEnabled：启用抛物线重力效果，启用后显示下面的参数
SkygravityScale：抛物线运动重力缩放
SkybounceCoefficient：落地反弹系数（0=不反弹，>1 可越弹越高，不夹 [0,1]）
SkybounceEnergyMode：constant/decay to zero  反弹能量模式：Constant=每次相同；DecayToZero=每次按衰减因子衰减，低于阈值即销毁
SkybounceDecayFactor：每次反弹额外衰减因子（<1 逐渐变小；=1 不变；>1 逐渐变大）
SkyparabolaApexHeight：最高点高度（米，>0 时用来计算初始竖直速度 vy0 = sqrt(2*g*h)）
SkybounceEndVyThreshold：竖直反弹速度低于该阈值则销毁（仅 DecayToZero 生效）

飞行物跟踪导弹
SkyhomingEnabled：启用跟踪，按频率刷新朝向目标（频率低更棱角，频率高更顺滑），启用后显示下面的参数
SkyhomingFrequency：跟踪频率（Hz），每秒更新朝向的次数。0 表示不更新（关闭）
SkyhomingStrength：跟踪强度，1完全跟踪，0不跟踪

飞行物半径旋转（相对载体，pathtangent空间）
SkyorbitEnabled：启用半径旋转，相对载体按半径做圆周偏移，启用后显示下面的参数
SkyorbitRadius：半径（米）
SkyorbitAngular：每次要旋转的角度（度）。例如 90/180/360。达到该角度后从0重新开始下一次 sweep。
SkyorbitSweepSpeedDeg：沿半径转动的角速度（度/秒）。符号决定方向：>0 逆时针，<0 顺时针。

飞行物回旋镖
SkyboomerangEnabled：启用回旋镖，飞到最远距离 -> 停顿 -> 返回起点/发射者，启用后显示下面的参数
SkyboomerangOutMaxDistance：飞出最远距离（米）：到达后进入‘最远距离停顿’阶段"
SkyboomerangApexStopTime：最远距离停顿时间（秒）
SkyboomerangBackUniformSpeed：回程匀速目标速度（米/秒）。>0 时作为回程速度目标
SkyboomerangBackUniformTime：回程由当前速度匀速过渡到目标速度所需时间（秒）；=0 则瞬时切换
SkyboomerangBackAccel：回程加速度（米/秒²），当 backAccelTime<=0 时使用该值
SkyboomerangBackAccelTime：回程加速时间（秒），>0 时按时间插值到匀速目标
SkyboomerangBackDecel：回程减速度（米/秒²），当 backDecelTime<=0 时使用该值（用于接近终点减速，可选）
SkyboomerangBackDecelTime：回程减速时间（秒），>0 时按时间插值至 0（用于接近终点减速，可选）

攻击叠加运动模式
SkyattackMotionMode 下： none\Skyfollowmove
None=不叠加空中追踪移动；Skyfollowmove=攻击期间叠加追踪移动

选择none不使用攻击移动

选择Skyfollowmove

增加攻击中跟踪（功能类似空中发现中跟踪，SkyhomingFrequency与SkyhomingStrength）

移动中攻击近战
SkyattackmoveSpeedMelee：近战时的攻击位移速度
SkyattackaccelerationMelee：近战时的攻击位移加速度
SkyattackaccelerationTimeMelee：近战时的加速时间
SkyattackdecelerationMelee：近战时的减速度
SkyattackdecelerationTimeMelee：近战时的减速时间
SkyattackmoveDurationMelee：近战时的总位移时长（含加/匀/减）

移动中攻击远程
SkyattackmoveSpeedRanged：远程时的攻击位移速度
SkyattackaccelerationRanged：远程时的攻击位移加速度
SkyattackaccelerationTimeRanged：远程时的加速时间
SkyattackdecelerationRanged：远程时的减速度
SkyattackdecelerationTimeRanged：远程时的减速时间
SkyattackmoveDurationRanged：远程时的总位移时长（含加/匀/减）





airPhaseConfig.groundPhaseID去掉，再airPhaseConfig.groundPhaseID位置添加groundPhase勾选，勾上就是永远运行地面阶段，那么怪物出生那一刻开始就要有重力，落到地面，地面阶段自己循环，
不勾选就不执行地面阶段逻辑

airPhaseConfig.airPhaseID去掉，再airPhaseConfig.airPhaseID位置添加airPhase勾选，勾上就是永远运行空中阶段，那么怪物出生那一刻开始就要没有重力，空中漂浮，空中阶段自己循环，
不勾选就不执行空中阶段逻辑




地面与空中 相互转换配置
如果地面填ID1 ,空中ID2，那就从地面ID1-空中ID2-地面ID1循环
如果空中填ID1 ,地面ID2，那就从空中ID1-地面ID2-空中ID1循环
二者的区别就是谁先开始

转换条件
1怪物血量HP到一定程度转换，这个时候不管怪物在做什么都要直接进入下一阶段
2攻击次数判断
怪物地面的时候近战攻击 或 远程攻击 了多少次后（近战和远程总和次数）  进入空中阶段
怪物空中的时候近战攻击 或 远程攻击 了多少次后（近战和远程总和次数）  进入地面阶段
边界：当二者都勾选并且设定满足的条件的时候，优先攻击判断，立刻转换并重置计数，但当HP满足条件的时候就立刻转换，HP越来越少，所以就一次，HP转换后就不会再按照HP条件转换了，但攻击转换仍然存在

参数资源
地面到空中转换
空中的位置：当前地面位置，增加Y轴的高度，得到怪物从地面到空中后的位置
升空中的匀速速度、匀速时间、匀加速、匀加速时间、匀减速、匀减速时间
升空时候的动画、特效、播放特效关键帧、特效锚点等
地面到空中转换增加一个选项，是否更换碰撞体，如果勾选，就可以从新指定碰撞体

空中到地面转换
空中的位置：当前地面位置，增加Y轴的高度，得到怪物从地面到空中后的位置
升空中的匀速速度、匀速时间、匀加速、匀加速时间、匀减速、匀减速时间
升空时候的动画、特效、播放特效关键帧、特效锚点等
空中到地面转换增加一个选项，是否更换碰撞体，如果勾选，就可以从新指定碰撞体


辅助线显示
地面辅助线显示选项：勾选的时候显示地面阶段发现 follow、backstep、攻击近战、攻击远程辅助线（不管airPhaseConfig.groundPhaseID是多少，显示或不显示辅助线无关）
空中辅助线显示选项：勾选的时候显示空中阶段发现 follow、backstep、攻击近战、攻击远程辅助线（不需airPhaseConfig.airPhaseIDD是多少，显示或不显示辅助线无关）


铁律/不变规则
不要影响已有地面阶段的逻辑
不要影响已有空中阶段的逻辑
不改变已有资源/Prefab 的标签与层，补丁仅在代码
不改已有“好用”的变量名。
不新增和现有语义重复的变量名。
优先在原变量、原方法里就地改逻辑，保持接口不变。
不用给我全部代码
修改的代码贴在哪个脚本，要把贴的脚本位置上两句代码和下两句代码给我 
已经有的逻辑直接引用不要再从新制造
代码要全部一字不差的看完


明天制作空中攻击


